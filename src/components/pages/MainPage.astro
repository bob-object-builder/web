---
import BobLogo from "@/components/ui/icons/BobLogo.astro";
import Terminal from "@/components/ui/Terminal.astro";
import GoTo from "@/components/ui/GoTo.astro";
import Layout from "@/layouts/Layout.astro";
import PointerIcon from "@/components/ui/icons/PointerIcon.astro";
import getContent from "@/lib/i18n/get-content";
import GithubIcon from "@/components/ui/icons/GithubIcon.astro";
import WarningIcon from "@/components/ui/icons/WarningIcon.astro";
import { importIcon } from "@/lib/import-icon";
import PlayGround from "@/components/ui/PlayGround.astro";
import TypesTable from "@/components/ui/TypesTable.astro";

const { locale } = Astro.props;

const t = await getContent("main", locale);
---

<Layout>
    <section>
        <div class="flex flex-col justify-center items-center gap-2">
            <BobLogo class="text-primary w-28" />
            <h1 class="text-4xl font-bold mb-4" set:html={t("welcome.title")} />
        </div>

        <div
            class="bg-primary text-black px-4 py-4 sm:py-2 rounded-md text-center gap-3 text-lg my-8 font-semibold text-balance"
        >
            <WarningIcon class="block mx-auto sm:inline sm:mr-2 sm:w-10" />
            {t("warning")}
            <WarningIcon class="hidden sm:inline sm:ml-2 w-10" />
        </div>
        <p
            class="mb-8 max-w-3xl text-center text-xl sm:text-2xl mx-auto"
            set:html={t("welcome.description")}
        />
        <Terminal set:html={t("code")} />
        <div class="grid grid-cols-2 mt-12 gap-3 max-w-md mx-auto">
            <GoTo variation="filled" href="#playground">
                {t("start")}
                <PointerIcon
                    class="w-4 transition-transform group-hover:scale-125"
                />
            </GoTo>
            <GoTo href={t("github.href")}>
                {t("github.claim")}
                <GithubIcon
                    class="w-4 transition-transform group-hover:scale-125"
                />
            </GoTo>
        </div>
    </section>
    <section class="grid gap-12">
        <div class="grid gap-3">
            <h2 class="text-2xl font-bold text-center">{t("claim.why")}</h2>
            <p class="text-xl text-center text-balance">
                {t("claim.answer")}
            </p>
        </div>
        <ul class="grid grid-cols-2 md:grid-cols-3 gap-6 md:gap-12">
            {
                t("claim.reasons").map(
                    async ({
                        title,
                        description,
                        icon,
                    }: {
                        [key: string]: string;
                    }) => {
                        const Icon = await importIcon(icon);

                        return (
                            <li class="p-4 rounded-md border-1 border-primary/20 border-solid grid gap-3 bg-stone-950">
                                <span class="bg-primary/60 inline-flex aspect-square rounded-md p-2 w-max">
                                    {Icon && <Icon />}
                                </span>
                                <h3 class="text-md font-semibold text-balance">
                                    {title}
                                </h3>
                                <p class="text-sm"> {description}</p>
                            </li>
                        );
                    },
                )
            }
        </ul>
    </section>
    <section>
        <div class="grid gap-3">
            <h2 class="text-2xl font-bold text-center">
                {t("in_action.title")}
            </h2>
            <p class="text-xl text-center text-balance">
                {t("in_action.description")}
            </p>
        </div>
    </section>
    <section class="grid gap-12" id="playground">
        <PlayGround />
        <TypesTable
            title={t("types.title")}
            description={t("types.description")}
        />
    </section>
</Layout>
